# ============================================
# Root Configuration
# ============================================
status = warn
name = PropertiesConfig

# ============================================
# Properties
# ============================================
property.LOG_PATTERN = %d{yyyy-MM-dd HH:mm:ss.SSS} [%t] %-5level %logger{36} - %msg%n
property.LOG_DIR = logs

# ============================================
# Appenders
# ============================================

# Console Appender
appender.console.type = Console
appender.console.name = Console
appender.console.target = SYSTEM_OUT
appender.console.layout.type = PatternLayout
appender.console.layout.pattern = ${LOG_PATTERN}

# File Appender - Applicazione
appender.file.type = RollingFile
appender.file.name = FileAppender
appender.file.fileName = ${LOG_DIR}/onegas-gateway.log
appender.file.filePattern = ${LOG_DIR}/onegas-gateway-%d{yyyy-MM-dd}-%i.log.gz
appender.file.layout.type = PatternLayout
appender.file.layout.pattern = ${LOG_PATTERN}
appender.file.policies.type = Policies
appender.file.policies.time.type = TimeBasedTriggeringPolicy
appender.file.policies.time.interval = 1
appender.file.policies.time.modulate = true
appender.file.policies.size.type = SizeBasedTriggeringPolicy
appender.file.policies.size.size = 10MB
appender.file.strategy.type = DefaultRolloverStrategy
appender.file.strategy.max = 30

# File Appender - Solo Errori
appender.error.type = RollingFile
appender.error.name = ErrorAppender
appender.error.fileName = ${LOG_DIR}/error.log
appender.error.filePattern = ${LOG_DIR}/error-%d{yyyy-MM-dd}-%i.log.gz
appender.error.layout.type = PatternLayout
appender.error.layout.pattern = ${LOG_PATTERN}
appender.error.filter.threshold.type = ThresholdFilter
appender.error.filter.threshold.level = ERROR
appender.error.filter.threshold.onMatch = ACCEPT
appender.error.filter.threshold.onMismatch = DENY
appender.error.policies.type = Policies
appender.error.policies.time.type = TimeBasedTriggeringPolicy
appender.error.policies.time.interval = 1
appender.error.policies.time.modulate = true
appender.error.policies.size.type = SizeBasedTriggeringPolicy
appender.error.policies.size.size = 10MB
appender.error.strategy.type = DefaultRolloverStrategy
appender.error.strategy.max = 30

# File Appender - Access Log
appender.access.type = RollingFile
appender.access.name = AccessAppender
appender.access.fileName = ${LOG_DIR}/access.log
appender.access.filePattern = ${LOG_DIR}/access-%d{yyyy-MM-dd}-%i.log.gz
appender.access.layout.type = PatternLayout
appender.access.layout.pattern = %d{yyyy-MM-dd HH:mm:ss} - %msg%n
appender.access.policies.type = Policies
appender.access.policies.time.type = TimeBasedTriggeringPolicy
appender.access.policies.time.interval = 1
appender.access.policies.time.modulate = true
appender.access.policies.size.type = SizeBasedTriggeringPolicy
appender.access.policies.size.size = 10MB
appender.access.strategy.type = DefaultRolloverStrategy
appender.access.strategy.max = 30

# ============================================
# Loggers
# ============================================

# Logger per il filtro Gateway
logger.gateway-filter.name = com.aton.proj.oneGasGateway.filter
logger.gateway-filter.level = info
logger.gateway-filter.additivity = false
logger.gateway-filter.appenderRef.console.ref = Console
logger.gateway-filter.appenderRef.access.ref = AccessAppender

# Logger per Spring Cloud Gateway
logger.spring-gateway.name = org.springframework.cloud.gateway
logger.spring-gateway.level = debug
logger.spring-gateway.additivity = false
logger.spring-gateway.appenderRef.console.ref = Console
logger.spring-gateway.appenderRef.file.ref = FileAppender

# Logger per l'applicazione
logger.app.name = com.aton.proj
logger.app.level = debug
logger.app.additivity = false
logger.app.appenderRef.console.ref = Console
logger.app.appenderRef.file.ref = FileAppender

# Root Logger
rootLogger.level = info
rootLogger.appenderRef.console.ref = Console
rootLogger.appenderRef.file.ref = FileAppender
rootLogger.appenderRef.error.ref = ErrorAppender